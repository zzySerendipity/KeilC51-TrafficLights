# KeilC51-TrafficLights
十字路口交通灯51Proteus8平台仿真：红黄绿交替显示，黄灯3s倒计时闪烁。每个对向路口时间可调。紧急状态EMERGENCY 调时状态MODE 正常交通状态NORMAL


《单片机原理及应用》课程作业

Task：Traffic Lights 51仿真交通灯

功能要求：

+   使用LED灯、按钮、开关、LCD模块、并口、中断、计时器/定时器、串口等实现；
+   实现的是十字路口交通灯控制，并且至少要实现两个路口控制；每个路口控制时间可调可设置；
+   有一键全局控制功能（例如，按一下所有路口全部为红灯、再按一下全部回复正常等。）

实现功能：

十字路口交通灯51Proteus8平台仿真。

路口红黄绿交替显示，黄灯3s倒计时会闪烁。每个对向路口时间可调，主机可根据从机发送的紧急状态来让路口停止计数（让他全红灯+黄灯好像有bug，有些情况可以，有些不可以，由于时间仓促，就没debug了。），从机可理解为中控机，可以显示当前分路口（主机）的通行状态（EMERGENCY or NORMAL）。

>   定时器，外部中断，串口收发，LCD，按钮开关控制，红绿黄等均已满足功能要求。

注意事项：

1.   Mode开关与Emergency开关只能下降沿或者低电平触发，我没有采用软件方式实现双边沿触发中断，因此在进行状态改变时，以一次“开关闭合再立即开启”作为让MODE和EMERGENCY的一次状态转换。
2.   Mode调时功能开启时Debug等会亮；Emergency开启时，从机（串口发送端）会让LCD显示紧急状态，并让Test测试灯亮起。
3.   Mode调时功能开启时，会等待本轮时间显示后才生效，这也符合现实生活。
4.   Mode开启且本轮交通结束后，进入调时，ALTER按钮控制当前调整的时间是南北主干道还是东西次干道。+1 -1按钮控制倒计时时间。时间有限，两条道路的红灯时间和绿灯时间相同。
5.   EMERGENCY状态下，会立即停止计时，结束状态后，恢复计时。

Time：20250525
